graph TB
    subgraph "Roadmap (Communication Layer)"
        roadmap["ğŸ“‹ .haunt/plans/roadmap.md<br/><br/>REQ-042: JWT Auth<br/>Status: ğŸŸ¡ In Progress<br/>Agent: Dev-Backend<br/>Blocked by: None"]
    end

    subgraph "Agent Roles"
        pm["ğŸ‘” Project Manager<br/><br/>â€¢ Strategic analysis<br/>â€¢ Roadmap planning<br/>â€¢ Batch coordination<br/>â€¢ Unblocking"]
        dev["ğŸ’» Dev Agent<br/><br/>â€¢ Implementation<br/>â€¢ TDD workflow<br/>â€¢ Auto-commit<br/>â€¢ Status updates"]
        reviewer["ğŸ” Code Reviewer<br/><br/>â€¢ Pattern detection<br/>â€¢ Quality gates<br/>â€¢ PR review<br/>â€¢ Merge coordination"]
        release["ğŸš€ Release Manager<br/><br/>â€¢ Deployment<br/>â€¢ Changelog<br/>â€¢ Risk assessment<br/>â€¢ Coordination"]
        research["ğŸ”¬ Research<br/><br/>â€¢ Investigation<br/>â€¢ Architecture<br/>â€¢ Library eval<br/>â€¢ Documentation"]
    end

    subgraph "Status Lifecycle"
        status1["âšª Not Started"]
        status2["ğŸŸ¡ In Progress"]
        status3["ğŸŸ¢ Complete"]
        status4["ğŸ”´ Blocked"]

        status1 -->|"Dev starts work"| status2
        status2 -->|"All criteria met"| status3
        status2 -->|"Dependency issue"| status4
        status4 -->|"PM unblocks"| status2
    end

    %% PM interactions
    pm -->|"1. Creates REQs"| roadmap
    pm -->|"2. Assigns agents"| roadmap
    pm -->|"7. Archives ğŸŸ¢"| roadmap

    %% Research interactions
    research -->|"3. Investigates"| roadmap
    research -->|"Documents findings"| roadmap

    %% Dev interactions
    dev -->|"4. Reads assignment"| roadmap
    dev -->|"5. Updates status âšªâ†’ğŸŸ¡"| roadmap
    dev -->|"6. Marks complete ğŸŸ¡â†’ğŸŸ¢"| roadmap

    %% Reviewer interactions
    reviewer -->|"Validates ğŸŸ¢"| roadmap
    reviewer -->|"Flags issues ğŸŸ¢â†’ğŸŸ¡"| roadmap

    %% Release interactions
    release -->|"Reads ğŸŸ¢ batch"| roadmap
    release -->|"Confirms deployment"| roadmap

    %% Coordination notes
    roadmap -.->|"Status visible to all"| pm
    roadmap -.->|"No direct agent communication"| dev
    roadmap -.->|"Async coordination"| reviewer
    roadmap -.->|"Single source of truth"| release

    classDef agentClass fill:#e1f5ff,stroke:#0066cc,stroke-width:2px
    classDef roadmapClass fill:#fff3cd,stroke:#ffc107,stroke-width:3px
    classDef statusClass fill:#f8d7da,stroke:#dc3545,stroke-width:2px

    class pm,dev,reviewer,release,research agentClass
    class roadmap roadmapClass
    class status1,status2,status3,status4 statusClass
